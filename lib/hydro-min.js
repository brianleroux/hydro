var Hydro=function(A){this.init(A)};Hydro.prototype={init:function(A){var B=this;B.manifestUrl=A.manifest;B.update=A.update;if(A.mode=="dev"){B.clear()}if(B.firstrun()){B.loadManifest(function(){B.loadLibraries()})}else{B.rehydrate();B.checkForNewManifest()}},loadManifest:function(B){var A=this;this.xhr(this.manifestUrl,function(){A.set("manifest",this.responseText);B()})},loadLibraries:function(){var A=this.manifest();var H=A.current;var G=A.profiles[H];var B=G.length;for(var E=0;E<B;E++){var C=G[E].url;var D=H+":"+G[E].name;var F=this;this.xhr(C,function(I){F.set(D,this.responseText);F.initializeLibrary(F.get(D))})}},rehydrate:function(){var A=this.manifest();var G=A.current;var F=A.profiles[G];var B=F.length;for(var D=0;D<B;D++){var C=G+":"+F[D].name;var E=this;E.initializeLibrary(E.get(C))}},checkForNewManifest:function(){var A=this;this.xhr(this.manifestUrl,function(){var B=this.responseText;var C=A.get("manifest");if(B!=C){A.update()}})},initializeLibrary:function(js){var hydro=this;eval(js)},xhr:function(A,B){var C=new XMLHttpRequest();C.open("get",A,false);C.onload=B;C.send()},get:function(A){return localStorage.getItem(A)},set:function(A,B){localStorage.setItem(A,B)},clear:function(){localStorage.clear()},manifest:function(){return eval("("+this.get("manifest")+")")},firstrun:function(){return this.get("manifest")==null}};